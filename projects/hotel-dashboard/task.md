# Hotel Dashboard Project Plan

## üéØ Goal
Build a Full-Stack Dashboard to visualize real-time hotel performance metrics across 3 different hotel properties (PMS Accounts).

## üèó Architecture
*   **Backend:** FastAPI (Python) serving data from DuckDB (Gold Layer).
*   **Frontend:** Tanstack Start (React + TypeScript) + Tremor/Recharts for visualization.
*   **Database:** DuckDB (OLAP) reading Parquet files generated by the ETL pipeline.

## üè® The 3 Hotel Properties (Mock Accounts)
We will simulate data for 3 distinct hotels, each mapping to one of our PMS formats:
1.  **The Grand Budapest (Legacy PMS):**
    *   *Data Source:* `hotel_booking.csv` structure (Complex, many columns).
    *   *Characteristics:* High ADR, low cancellation, long stays.
2.  **Seaside Resort (Modern PMS):**
    *   *Data Source:* `hotel_reservation.csv` structure (Simpler, focused on room types).
    *   *Characteristics:* Seasonal spikes, family bookings.
3.  **City Budget Inn (Budget PMS):**
    *   *Data Source:* Custom minimal structure (from our `pms_budget.py`).
    *   *Characteristics:* High volume, short stays, high cancellation.

## üõ† Tasks

### Phase 1: Data Engineering (Refining the Pipeline)
- [ ] **Update Producers:** Modify `pms_legacy.py` and `pms_modern.py` to emit data matching the CSV schemas (`hotel_booking.csv` and `hotel_reservation.csv`).
- [ ] **Update dbt Models:**
    - [ ] `stg_legacy`: Map columns from `hotel_booking.csv` format.
    - [ ] `stg_modern`: Map columns from `hotel_reservation.csv` format.
    - [ ] `fact_bookings`: Unify all 3 into a single schema (adding `hotel_id` column).
- [ ] **New Gold Models:**
    - [ ] `gold_revenue_by_hotel`: Daily revenue per hotel.
    - [ ] `gold_occupancy_rate`: Percentage of rooms occupied.

### Phase 2: Backend API (FastAPI)
- [ ] Create `GET /api/dashboard/summary`: Returns total revenue, ADR, bookings for all hotels.
- [ ] Create `GET /api/dashboard/trends`: Returns daily revenue trend for the last 30 days.
- [ ] Create `GET /api/dashboard/hotel/{hotel_id}`: Returns specific stats for one property.

### Phase 3: Frontend Dashboard (Next.js)
- [ ] **Setup:** Initialize Next.js project with Tailwind CSS.
- [ ] **Components:**
    - [ ] `KPICard`: Displays single metric (Revenue, ADR).
    - [ ] `TrendChart`: Line chart for revenue over time.
    - [ ] `HotelSelector`: Dropdown to switch between the 3 hotels.
- [ ] **Integration:** Fetch data from FastAPI and render charts.

## üìä Key Metrics to Visualize
1.  **ADR (Average Daily Rate):** `Total Revenue / Rooms Sold`
2.  **RevPAR (Revenue Per Available Room):** `Total Revenue / Total Rooms`
3.  **Occupancy Rate:** `Rooms Sold / Total Rooms`
4.  **Cancellation Rate:** `Canceled Bookings / Total Bookings`
s